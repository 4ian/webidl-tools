#!/usr/bin/env node
'use strict';

var util = require('../lib/util');
var description = 'Generate JavaScript code from WebIDL definitions. The ' +
  'generated code can be used to validate WebIDL enums and dictionaries. If ' +
  'multiple WebIDL definitions with the same name are provided, they will ' +
  'be merged. This command also accepts URLs.';

var js = require('../lib/js');
var webidl = require('../lib/webidl');
var o = 29;
var w = 74;

var program = util.program(exports, description)
  .usage('[options] <idl ...>');

webidl.addOptions(program, o, w, { merge: true })
  .option('--flow-types-in-comments',
    'Include Flow types in comments (default)',
    true)
  .option('--no-flow-types-in-comments',
    'Do not include Flow types in comments')
  .option('--jsdoc',
    'Include JSDoc comments (default)',
    true)
  .option('--no-jsdoc',
    'Do not include JSDoc comments')
  .option('-o, --out <file>', util.wrap(
    'File to write JavaScript code to (defaults to ./definitions.js)', o, w),
    'definitions.js');

function list(str) {
  return str.split(',');
}

function regex(str) {
  return new RegExp(str);
}

if (require.main === module) {
  program.parse(process.argv);
  js(program.args, program);
}
